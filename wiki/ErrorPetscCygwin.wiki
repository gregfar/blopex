#summary (retired with appearance of PETSc 3.1-p3 ? Can be removed now?) Errors with BLOPEX Complex PETSc testing on Cygwin
<wiki:toc max_depth="2" />

= Introduction =

Getting some errors of the test of  BLOPEX Complex under Petsc-3.1-p2 on Cygwin in Windows XP

= Setup Petsc =  

To use blopex_solve_complex using the  Petsc first download the development version from the Petsc website at http://www.mcs.anl.gov/petsc/petsc-as/download/index.html
In particular, if you install in windows, see http://www.mcs.anl.gov/petsc/petsc-as/documentation/installation.html#Windows. One can download Cygwin from http://cygwin.com/.

I download Petsc-3.1-p2 in L:/pei/petsc_complex_1. To install files issue command:
{{{
>> cd  /cygdrive/l/pei/petsc_complex_1
>> gunzip -c petsc-3.1-p2.tar.gz | tar -xof - 
}}}
This creates files in directory petsc-3.1-p2 

Then
{{{
>>cd petsc-3.1-p2
>>PETSC_DIR=$PWD; export PETSC_DIR
}}}

Download the blopex_petsc_interface.tar.gz and blopex_petsc_abstract.tar.gz from the Blopex Google Code site http://code.google.com/p/blopex and then move them to your home directory.

Assuming you are in your home directory such as /cygdrive/l/pei/petsc_complex_1, install as follows:
{{{
>> tar -zxvf blopex_petsc_interface.tar.gz
}}}

Configure Petsc as follows:
{{{
>> ./config/configure.py  --with-cc=gcc --with-fc=gfortran --with-cxx=g++ --download-f-blas-lapack=1 --download-mpich=1 --download-blopex=/cygdrive/l/pei/petsc_complex_1/blopex_petsc_abstract.tar.gz --with-scalar-type=complex --with-clauguage=cxx
}}}

After configuration is finished issue the command
{{{
>> make 
It was said one error during compile. 
petsc-interface.c: In function 'int_LOBPCG_intRandomContext<>':
petsc-interface.c:193: error 'I' was not declared in this scope
/usr/bin/ar:petsc-interface.o :No such file or directory

>> make test
Run test examples successfully
}}}

= Errors with blopex_petsc =  
 
Now create executables for the blopex driver 
{{{
>> cd petsc-3.1-p2/src/contrib/blopex/driver
>> make driver
}}}
Errors as following:
{{{
driver.c : In function  ‘void Precond_FnSingleVector <void*, void *, void*>’:
driver.c : 92: error: invalid conversion from ‘void*’ to '_p_Vec*’
driver.c : 92: error: initializing argument 2 of ‘ PetscErrorCode KSPSolve<_p_KSP*,_p_Vec*,_p_Vec*>’
driver.c : 92: error: invalid conversion from ‘void*’ to '_p_Vec*’
driver.c : 92: error: initializing argument 3 of ‘ PetscErrorCode KSPSolve<_p_KSP*,_p_Vec*,_p_Vec*>’
g++: driver.o: No such file or directory
}}}
Now create executables for the blopex driver_fiedler 
{{{
>> cd petsc-3.1-p2/src/contrib/blopex/driver_fiedler
>> make driver_fiedler
}}}
Errors as following:
{{{
driver_fiedler.c: 249: under reference to ‘LOBPCG _intiRandomContext<>’
driver_fiedler.c: 252: under reference to ‘PETSCSetupInterpreter<mv_InterfaceInterpreter*>’
driver_fiedler.c: 269: under reference to ‘PETSC_Zpotrf_interface’<char*,int*,komplex*,int*,int*>
driver_fiedler.c: 270: under reference to ‘PETSC_zsyqv_interface’ 
'<int*,char*,char*,int*,komplex*,int*,double*,komplex*,int*,double*,int*>'
driver_fiedler.c: 401: under reference to ‘LOBPCG _DestroyRandomContext<>’



}}}